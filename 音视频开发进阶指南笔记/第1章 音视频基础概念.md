# 音频

## 一些常用的概念

采样：在时间轴上对信号进行数字化。 

奈奎斯特定理（采样定理）：按比声音最高频率高2倍以上的频率对声音进行采样（也称为AD 转换），才能保证声音不会失真。简单理解：一次振动产生正负两个半波。为了准确记录还原这一次振动，就要在一次振动的时间内采样两次。

量化：在幅度轴上对信号进行数字化，比如用16bit的二进制信号来表示声音的一个采样。

编码：按照一定的格式记录采样和量化后的数字数据，比如顺序存储或压缩存储。

PCM：PCM(Pulse Code Modulation)也被称为脉冲编码调制。
**PCM音频数据是未经压缩的音频采样数据裸流**，它是由模拟信号经过采样、量化、编码转换成的标准的数字音频数据。

## 编码（压缩）

这里的编码和上面的编码不是一个概念，注意区分

原始数据太大，互联网传播不现实，所以需要通过编码算法， 对原数据进行压缩。

几种常见的压缩算法：WAV、AAC、MP3、 Ogg。各自的特点，适用场合这里略。

# 图像

对于视频帧，使用YUV数据格式，其中“Y”表示明亮度 （Luminance或Luma），也称灰阶值；而“U”和“V”表示的则是色度（Chrominance或Chroma），它们的作用是描述影像的色彩及饱和度， 用于指定像素的颜色

YUV有多种采样格式，其中最常见的是4:2:0。对于420的具体解释，参考这篇文章：https://zhuanlan.zhihu.com/p/85620611

其中的重要原则：在数字图像中，(1) 每一个图形像素都要包含 luma（亮度）值；（2）几个图形像素共用一个 Cb + Cr 值，一般是 2、4、8 个像素。

## 视频编码

相较于音频数据，视频数据有极强的相关性，也就是说有大量的冗余信息，包括空间上的冗余信息和时间上的冗余信息。

帧间编码技术：去除时间上的冗余信息。

帧内编码技术：去除空间上的冗余信息。如MPEG，H.264

**I帧**：帧内编码帧（intra picture），可去除视频的空间冗余信息。下面的P、B帧，都是去除时间冗余信息。

**P帧**：前向预测编码帧（predictive-frame）。通过将图像序列中前面已编码帧的时间冗余信息充分去除来压缩传输数据量的编码图像，也成为预测帧。

**B帧**：双向预测内插编码帧（bi-directional interpolated prediction frame）。既考虑源图像序列前面的已编码帧，又顾及源图像序列后面的已编码帧之间的时间冗余信息，来压缩传输数据量的编码图像，也称为双向预测帧。

DTS：Decoding Time Stamp。主要用于表示压缩包何时被解码。即：决定帧的解码顺序

PTS：Presentation Time Stamp。主要用于表示解码后的图像何时显示给用户。即：决定帧的显示顺序。

GOP：group of pictures，两个I帧之间形成的一组图片，就是GOP。gop_size：代表的是两个I帧之间的帧数目。一个GOP中容量最大的帧就是I帧，所以相对来讲，gop_size设置的越大，整个画面的质量就会越好。

在提高视频质量的技巧中，其中一个就是多使用B帧，因为I帧的压缩率是7，P是20，B可以达到50.多使用B帧，能节省大量空间，节省出来的空间能保存更多的I帧。

